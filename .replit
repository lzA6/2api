modules = ["python-3.11"]
# 这是最关键的修改：我们强制 Replit 构建一个完整的 Python 3.11 环境。
[nix]
channel = "stable-23.11"
packages = ["cargo", "libiconv", "libxcrypt", "python311", "rustc"]

# 这是第二关键的修改：我们使用 FastAPI 官方推荐的 uvicorn 来启动服务器。
# 这将彻底解决所有兼容性问题。
run = "uvicorn main:app --host 0.0.0.0 --port 8080"

# 这一行保持不变。
entrypoint = "main.py"

[[ports]]
localPort = 8080
externalPort = 8080
